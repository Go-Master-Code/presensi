<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard Admin</title>
  
    <!-- Bootstrap 4 -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"/>

    <!-- DataTables Bootstrap 4 -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap4.min.css" />

    <!-- font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

    <!-- CSS animasi spinner -->
    <style>
    .spinner-logo {
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    /* #table-karyawan {
        table-layout: fixed;
    } */
    </style>

    <style>
        .dropdown-menu.bg-dark .dropdown-item:hover {
            background-color: #495057;
        }
        body {
            min-height: 100vh;
            display: flex;
            background-color: #f4f6f8;
            color: #343a40;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }
    /* Sidebar */
        #sidebar {
            min-width: 250px;
            max-width: 250px;
            background-color: #343a40;
            color: #fff;
            height: 100vh;
            position: fixed;
            padding-top: 1.5rem;
        }
        #sidebar .nav-link {
            color: #adb5bd;
            font-size: 1.1rem;
        }
        #sidebar .nav-link.active {
            background-color: #495057;
            color: #fff;
            font-weight: 600;
            border-radius: 0.375rem;
        }
        #sidebar .nav-link:hover {
            background-color: #495057;
            color: #fff;
        }

        /* Main content */
        #content {
            margin-left: 250px;
            padding: 2rem;
            width: 100%;
        }
        header {
            margin-bottom: 2rem;
        }
        header h1 {
            font-weight: 700;
            font-size: 2rem;
        }

        /* Card style */
        .card {
            box-shadow: 0 0.15rem 1.75rem rgba(33, 40, 50, 0.15);
            border: none;
        }

        /* Responsive for small screens */
        @media (max-width: 768px) {
            #sidebar {
                position: relative;
                height: auto;
                max-width: 100%;
            }
            #content {
                margin-left: 0;
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- spinner untuk menunjukkan sistem bekerja saat fetch, delete, create, dan update -->
    <!-- Global Loading Spinner -->
    <!-- Spinner Container -->
    <div id="loadingSpinner" class="d-none position-fixed w-100 h-100" style="top: 0; left: 0; background-color: rgba(255,255,255,0.7); z-index: 2000;">
        <div class="d-flex justify-content-center align-items-center h-100">
            <img src="assets/loading.svg" class="spinner-logo" alt="Loading..." width="80" height="80">
        </div>
    </div>

    <nav id="sidebar" class="d-flex flex-column">
        <div class="text-center mb-4">
            <h3>Admin Panel</h3>
            <hr class="bg-secondary" />
        </div>
        <ul class="nav flex-column px-3">
            <li class="nav-item">
                <a href="#" class="nav-link active" id="menu-karyawan"><i class="fas fa-users mr-2"></i> Data Karyawan</a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" id="menu-ijin"><i class="fas fa-user-clock mr-2"></i> Data Ijin</a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" id="menu-hari-libur"><i class="fas fa-calendar mr-2"></i> Hari Libur</a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" id="menu-absensi"><i class="fas fa-clock mr-2"></i> Data Presensi</a>
            </li>
            <!-- Menu Laporan Dropdown -->
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="menu-laporan" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-file-alt mr-2"></i> Laporan
                </a>
                <div class="dropdown-menu bg-dark border-0" aria-labelledby="menu-laporan">
                    <a class="dropdown-item text-light" href="#" id="menu-laporan-harian">Presensi Harian</a>
                    <a class="dropdown-item text-light" href="#" id="menu-laporan-bulanan">Presensi Bulanan</a>
                </div>
            </li>
        </ul>
    </nav>

    <div id="content">
        <!-- Section Data Karyawan -->
        <section id="section-karyawan">
            <header class="d-flex align-items-center justify-content-between mb-3">
                <h1>Data Karyawan</h1>
                <button type="button" id="button-tambah-karyawan" class="btn btn-dark" data-toggle="modal" data-target="#modalKaryawan">
                    Tambah Karyawan
                </button>
            </header>
            <div class="container-fluid my-4">
                <!-- âœ… Alert sukses tambah data -->
                <div id="alert-container"></div>

                <!-- tombol untuk test spinner -->
                <!-- <button class="btn btn-warning" onclick="showSpinner(); setTimeout(hideSpinner, 2000);">Test Spinner</button> -->

                <!-- Modal untuk add data -->
                <div class="modal fade" id="modalKaryawan" tabindex="-1" role="dialog" aria-labelledby="modalKaryawanLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalKaryawanLabel">Data Karyawan Baru</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <!-- modal alert jika gagal tambah data -->
                                <div id="modal-alert" class="w-100 mb-3"></div>

                                <form id="form-karyawan" autocomplete="off">
                                    <div class="form-group row">
                                        <label for="id" class="col-form-label col-md-4">
                                            ID:<span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" id="id" name="id" minlength="10" maxlength="10" required>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="nama" class="col-form-label col-md-4">
                                            Nama:<span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" id="nama" name="nama" maxlength="50" required>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="jenjang" class="col-form-label col-md-4">
                                            Jenjang:<span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <select class="custom-select" id="jenjang" name="jenjang" required>
                                                <option selected disabled value="">Pilih jenjang</option>
                                                <!-- option diisi dari js di halaman ini -->
                                            </select>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary">Save changes</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal untuk edit data -->
                <div class="modal fade" id="modalEditKaryawan" tabindex="-1" role="dialog" aria-labelledby="modalEditKaryawan" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalKaryawanLabel">Edit Data Karyawan</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form id="form-edit-karyawan" autocomplete="off">
                                    <div class="form-group row">
                                        <label for="edit-id" class="col-form-label col-md-4">
                                            ID:<span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" id="edit-id" name="edit-id" minlength="10" maxlength="10" disabled>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="edit-nama" class="col-form-label col-md-4">
                                            Nama:<span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" id="edit-nama" name="edit-nama" maxlength="50" required>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="edit-jenjang" class="col-form-label col-md-4">
                                            Jenjang:<span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <select class="custom-select" id="edit-jenjang" name="edit-jenjang" required>
                                                <option selected disabled value="">Pilih jenjang</option>
                                                <!-- option diisi dari js di halaman ini -->
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="edit-aktif" class="col-form-label col-md-4">Aktif:</label>
                                        <div class="col-md-8 d-flex align-items-center">
                                            <div class="form-check mb-0">
                                                <input type="checkbox" class="form-check-input" id="edit-aktif" name="edit-aktif">
                                                <label class="form-check-label" for="edit-aktif">Ya</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary">Update Data</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- alert untuk macam-macam notif misalnya sukses delete -->
                <div id="alert-container"></div>

                <!-- Modal Konfirmasi Hapus -->
                <div class="modal fade" id="confirmDeleteModal" tabindex="-1" role="dialog" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
                        <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="confirmDeleteLabel">Konfirmasi Hapus</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Tutup">
                            <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            Apakah Anda yakin ingin menghapus karyawan dengan ID: <span id="deleteIdText" class="font-weight-bold"></span>?
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
                            <button type="button" id="btnConfirmDelete" class="btn btn-danger">Hapus</button>
                        </div>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table id="table-karyawan" class="table table-striped table-bordered table-hover">
                        <!-- <caption>List of users</caption> -->
                        <thead class="thead-light">
                            <tr>
                                <th style="text-align: center;" scope="col">ID</th>
                                <th scope="col">Nama</th>
                                <th style="text-align: center;" scope="col">Jenjang</th>
                                <th style="text-align: center;" scope="col">Aktif</th>
                                <th style="text-align: center;" scope="col">Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- komponen dan data akan dibuat oleh js -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- section hari libur -->
        <section id="section-hari-libur" class="d-none">
            <header class="d-flex align-items-center justify-content-between mb-3">
                <h1>Data Hari Libur</h1>
                <button type="button" id="button-tambah-hari-libur" class="btn btn-dark" data-toggle="modal" data-target="#modalHariLibur">
                    Tambah Hari Libur
                </button>
            </header>
        
            <div class="container-fluid my-4">
                <!-- âœ… Alert sukses tambah data -->
                <div id="alert-container-hari-libur"></div>

                <!-- tombol untuk test spinner -->
                <!-- <button class="btn btn-warning" onclick="showSpinner(); setTimeout(hideSpinner, 2000);">Test Spinner</button> -->

                <!-- Modal untuk add data -->
                <div class="modal fade" id="modalHariLibur" tabindex="-1" role="dialog" aria-labelledby="modalHariLiburLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalHariLiburLabel">Data Hari Libur</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <!-- modal alert jika gagal tambah data -->
                                <div id="modal-alert-hari-libur" class="w-100 mb-3"></div>

                                <form id="form-hari-libur" autocomplete="off">
                                    <div class="form-group row">
                                        <label for="hari-libur" class="col-form-label col-md-4">
                                            Hari Libur:<span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <input type="date" class="form-control form-control-sm" id="hari-libur" name="hari-libur" required />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="keterangan" class="col-form-label col-md-4">
                                            Keterangan:<span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <textarea class="form-control" id="keterangan" name="keterangan" rows="3" required placeholder="Tuliskan keterangan hari libur ..."></textarea>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                        <button type="submit" id="button-submit-hari-libur" class="btn btn-primary">Save changes</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal untuk edit data -->
                <div class="modal fade" id="modalEditHariLibur" tabindex="-1" role="dialog" aria-labelledby="modalEditHariLibur" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalEditHariLibur">Edit Hari Libur</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form id="form-edit-hari-libur" autocomplete="off">
                                    <div class="form-group row">
                                        <label for="edit-hari-libur" class="col-form-label col-md-4">
                                            Hari Libur:<span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <input type="date" class="form-control form-control-sm" id="edit-hari-libur" name="edit-hari-libur" required />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="keterangan" class="col-form-label col-md-4">
                                            Keterangan:<span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <textarea class="form-control" id="edit-keterangan" name="edit-keterangan" rows="3" required placeholder="Tuliskan keterangan hari libur ..."></textarea>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary">Update Data</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- alert untuk macam-macam notif misalnya sukses delete -->
                <div id="alert-container"></div>

                <!-- Modal Konfirmasi Hapus Hari Libur-->
                <div class="modal fade" id="confirmDeleteHariLibur" tabindex="-1" role="dialog" aria-labelledby="confirmDeleteHariLibur" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
                        <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="confirmDeleteLabel">Konfirmasi Hapus</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Tutup">
                            <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            Apakah Anda yakin ingin menghapus hari libur dengan ID: <span id="deleteHariLibur" class="font-weight-bold"></span>?
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
                            <button type="button" id="btnConfirmDeleteHariLibur" class="btn btn-danger">Hapus</button>
                        </div>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table id="table-hari-libur" class="table table-striped table-bordered table-hover">
                        <!-- <caption>List of users</caption> -->
                        <thead class="thead-light">
                            <tr>
                                <th style="text-align: center;" scope="col">ID</th>
                                <th style="text-align: center;" scope="col">Tanggal Libur</th>
                                <th style="text-align: center;" scope="col">Hari</th>
                                <th style="text-align: center;" scope="col">Keterangan</th>
                                <th style="text-align: center;" scope="col">Aksi</th>
                        </thead>
                        <tbody>
                            <!-- komponen dan data akan dibuat oleh js -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Section Data Absensi -->
        <section id="section-absensi" class="d-none">
            <header>
                <h1>Data Presensi</h1>
                <div>
                    <button class="btn btn-info btn-sm mr-2" id="btnRefreshAbsensi">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button class="btn btn-success btn-sm" id="btnExportAbsensi">
                        <i class="fas fa-file-export"></i> Export Pdf
                    </button>
                </div>
            </header>
            <div class="card mb-3 p-3">
                <form id="form-filter-presensi" class="form-inline">
                    <div class="form-group mr-3 mb-2">
                        <label for="filter-tanggal" class="mr-2">Tanggal:</label>
                        <input type="date" class="form-control form-control-sm" id="filter-tanggal" name="filter-tanggal" />
                    </div>
                    <div class="form-group mr-3 mb-2">
                        <label for="filter-nama" class="mr-2">Nama Karyawan:</label>
                        <input type="text" autocomplete="off" class="form-control form-control-sm" id="filter-nama" name="filter-nama" placeholder="Cari nama..." />
                    </div>
                    <button type="button" class="btn btn-primary btn-sm mb-2" id="button-find">Find</button>
                    <button type="button" class="btn btn-secondary btn-sm mb-2 ml-2" id="button-clear">Clear</button>
                </form>
            </div>

            <!-- âœ… Alert sukses tambah data -->
            <div id="alert-find-container"></div>
           
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card text-white bg-primary">
                        <div class="card-body p-3">
                            <h5 class="card-title">Total Hadir</h5>
                            <p class="card-text h3" id="stat-hadir">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-white bg-warning">
                        <div class="card-body p-3">
                            <h5 class="card-title">Total Izin</h5>
                            <p class="card-text h3" id="stat-izin">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-white bg-danger">
                        <div class="card-body p-3">
                            <h5 class="card-title">Total Sakit</h5>
                            <p class="card-text h3" id="stat-sakit">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-white bg-secondary">
                        <div class="card-body p-3">
                            <h5 class="card-title">Total Absen</h5>
                            <p class="card-text h3" id="stat-absen">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table id="table-presensi" class="table table-striped table-bordered table-hover mb-0">
                            <thead class="thead-light">
                                <tr>
                                    <th style="text-align: center;">ID</th>
                                    <th style="text-align: center;">ID Karyawan</th>
                                    <th style="text-align: center;">Nama</th>
                                    <th style="text-align: center;">Tanggal</th>
                                    <th style="text-align: center;">Waktu Masuk</th>
                                    <th style="text-align: center;">Waktu Pulang</th>
                                    <th style="text-align: center;">Keterangan</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data Absensi akan diisi via JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- section laporan absensi harian -->
        <section id="section-laporan-harian" class="d-none">
            <header class="mb-3">
                <h1>Laporan Presensi Harian</h1>
            </header>

            <div class="card mb-3 p-3">
                <form id="form-laporan-harian" class="form-inline">
                    <div class="form-group mr-3 mb-2">
                        <label for="tanggal-laporan-harian" class="mr-2">Tanggal:</label>
                        <input type="date" class="form-control form-control-sm" id="tanggal-laporan-harian" name="tanggal-laporan-harian" required />
                    </div>
                    <button id="button-tampilkan-laporan-harian" name="button-tampilkan-laporan-harian" type="button" class="btn btn-primary btn-sm mb-2">Tampilkan</button>
                    <button type="button" class="btn btn-secondary btn-sm mb-2 ml-2" id="button-clear-laporan-harian">Clear</button>
                </form>
            </div>

            <div>
                <div>
                    <div class="table-responsive">
                        <table id="table-laporan-presensi-harian" class="table table-striped table-bordered table-hover mb-0">
                            <thead class="thead-light">
                                <tr>
                                <th style="text-align: center;">ID</th>
                                <th style="text-align: center;">ID Karyawan</th>
                                <th style="text-align: center;">Nama</th>
                                <th style="text-align: center;">Tanggal</th>
                                <th style="text-align: center;">Waktu Masuk</th>
                                <th style="text-align: center;">Waktu Pulang</th>
                                <th style="text-align: center;">Keterangan</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data Absensi akan diisi via JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Tempat menampilkan laporan -->
            <div id="hasil-laporan-harian">
                <!-- Isi dari JS: tabel, ringkasan, dll -->
            </div>
        </section>

        <!-- section laporan absensi harian -->
        <section id="section-laporan-bulanan" class="d-none">
            <header class="mb-3">
                <h1>Laporan Presensi Bulanan</h1>
            </header>

            <div class="card mb-3 p-3">
                <form id="form-laporan-bulanan" class="form-inline">
                    <div class="form-group mr-3 mb-2">
                        <label for="bulan-laporan" class="mr-2">Bulan:</label>
                        <input type="month" class="form-control form-control-sm" id="bulan-laporan" name="bulan-laporan" required />
                    </div>
                    <button type="button" id="button-tampilkan-laporan-agregat-bulanan" name="button-tampilkan-laporan-agregat-bulanan" class="btn btn-primary btn-sm mb-2">Tampilkan</button>
                </form>
            </div>

            <!-- Tempat menampilkan laporan -->
            <div id="hasil-laporan-harian">
                <!-- Isi dari JS: tabel, ringkasan, dll -->
            </div>
        </section>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <!-- Popper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <!-- DataTables -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap4.min.js"></script>
    
    <!-- script api -->
    <script src="js/api/karyawan.js"></script>
    <script src="js/api/dashboard.js"></script>

    <!-- mengisi value combobox dari db -->
    <script>
        function createOption(value, text) {
            const option = document.createElement("option");
            option.value = value;
            option.textContent = text;
            return option;
        }

        document.addEventListener("DOMContentLoaded",function() {
            fetch("/api/jenjang")
            .then(response=> response.json()) // ubah ke format json
            .then(data=> {
                const select = document.getElementById("jenjang");
                const editJenjang = document.getElementById("edit-jenjang");
                // const editKelas = document.getElementById("edit-kelas");

                data.data.forEach(jenjang => {
                    const option = document.createElement("option");
                    
                    select.appendChild(createOption(jenjang.id,jenjang.nama));
                    editJenjang.appendChild(createOption(jenjang.id,jenjang.nama));
                    //editKelas.appendChild(createOption(kelas.id,kelas.nama));
                });
            })
            .catch(error=> {
                console.error("Gagal mengambil data jenjang:", error)
            })
        })
    </script>

     <!-- menampilkan alert di modal (sukses / gagal add data karyawan)-->
    <script>
        function showModalAlert(message, type = 'danger', duration = 7000) {
            const alertContainer = document.getElementById('modal-alert');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type} alert-dismissible fade show`;
            alert.role = 'alert';
            alert.innerHTML = `
                ${message}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            `;
            alertContainer.innerHTML = ''; // clear previous
            alertContainer.appendChild(alert);

            setTimeout(() => {
                $(alert).alert('close');
            }, duration);
        }
    </script>

    <!-- menampilkan notif berhasil hapus di halaman utama -->
    <script>
        function showAlert(message, type = 'success', duration = 4000) {
            const alertContainer = document.getElementById('alert-container');

            // Bersihkan alert yang lama (kalau ada)
            alertContainer.innerHTML = '';

            // Buat elemen alert
            const alert = document.createElement('div');
            alert.className = `alert alert-${type} alert-dismissible fade show`;
            alert.role = 'alert';
            alert.innerHTML = `
                ${message}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            `;

            // Tambahkan ke container
            alertContainer.appendChild(alert);

            // Auto close setelah beberapa detik (duration)
            setTimeout(() => {
                $(alert).alert('close'); // gunakan jQuery Bootstrap alert close
            }, duration);
        }
    </script>


    <!-- menampilkan notif berhasil hapus di halaman hari kerja -->
    <script>
        function showModalAlertHariLibur(message, type = 'danger', duration = 7000) {
            const alertContainer = document.getElementById('modal-alert-hari-libur');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type} alert-dismissible fade show`;
            alert.role = 'alert';
            alert.innerHTML = `
                ${message}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            `;
            alertContainer.innerHTML = ''; // clear previous
            alertContainer.appendChild(alert);

            setTimeout(() => {
                $(alert).alert('close');
            }, duration);
        }
     </script>

    <!-- show alert find data -->
    <script>
        function showAlertFindContainer(message, type = 'success', duration = 4000) {
            const alertContainer = document.getElementById('alert-find-container');

            // Bersihkan alert yang lama (kalau ada)
            alertContainer.innerHTML = '';

            // Buat elemen alert
            const alert = document.createElement('div');
            alert.className = `alert alert-${type} alert-dismissible fade show`;
            alert.role = 'alert';
            alert.innerHTML = `
                ${message}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            `;

            // Tambahkan ke container
            alertContainer.appendChild(alert);

            // Auto close setelah beberapa detik (duration)
            setTimeout(() => {
                $(alert).alert('close'); // gunakan jQuery Bootstrap alert close
            }, duration);
        }
    </script>

    <script>
        // Toggle sidebar menu & content
        const menuKaryawan = document.getElementById('menu-karyawan');
        const menuAbsensi = document.getElementById('menu-absensi');
        const menuHariLibur = document.getElementById('menu-hari-libur');
        const menuLaporanHarian = document.getElementById('menu-laporan-harian');
        const menuLaporanBulanan = document.getElementById('menu-laporan-bulanan');
        const sectionKaryawan = document.getElementById('section-karyawan');
        const sectionAbsensi = document.getElementById('section-absensi');
        const sectionHariLibur = document.getElementById('section-hari-libur');
        const sectionLaporanHarian = document.getElementById('section-laporan-harian');
        const sectionLaporanBulanan = document.getElementById('section-laporan-bulanan');
        const contentHeader = document.querySelector('#content header h1');

        // event listener menu karyawan
        menuKaryawan.addEventListener('click', function(e) {
            e.preventDefault();

            sectionKaryawan.classList.remove('d-none');
            sectionAbsensi.classList.add('d-none');
            sectionHariLibur.classList.add('d-none');
            sectionLaporanHarian.classList.add('d-none');
            sectionLaporanBulanan.classList.add('d-none');
            contentHeader.textContent = 'Data Karyawan';

            menuKaryawan.classList.add('active');
            menuAbsensi.classList.remove('active');
            menuHariLibur.classList.remove('active');
            menuLaporanHarian.classList.remove('active');
            menuLaporanBulanan.classList.remove('active');
        });

        // event listener menu absensi
        menuAbsensi.addEventListener('click', function(e) {
            e.preventDefault();
        
            sectionKaryawan.classList.add('d-none');
            sectionAbsensi.classList.remove('d-none');
            sectionHariLibur.classList.add('d-none');
            sectionLaporanHarian.classList.add('d-none');
            sectionLaporanBulanan.classList.add('d-none');
            contentHeader.textContent = 'Data Presensi';

            menuAbsensi.classList.add('active');
            menuHariLibur.classList.remove('active');
            menuKaryawan.classList.remove('active');
            menuLaporanHarian.classList.remove('active');
            menuLaporanBulanan.classList.remove('active');
        });

        // event listener menu hari libur
        menuHariLibur.addEventListener('click', function(e) {
            e.preventDefault();

            sectionHariLibur.classList.remove('d-none');
            sectionKaryawan.classList.add('d-none');
            sectionAbsensi.classList.add('d-none');
            sectionLaporanHarian.classList.add('d-none');
            sectionLaporanBulanan.classList.add('d-none');
            contentHeader.textContent = 'Data Hari Libur';

            menuHariLibur.classList.add('active');
            menuKaryawan.classList.remove('active');
            menuAbsensi.classList.remove('active');
            menuLaporanHarian.classList.remove('active');
            menuLaporanBulanan.classList.remove('active');
        });

        // event listener menu laporan absensi harian
        menuLaporanHarian.addEventListener('click', function(e) {
            e.preventDefault();
        
            sectionKaryawan.classList.add('d-none');
            sectionAbsensi.classList.add('d-none');
            sectionHariLibur.classList.add('d-none');
            sectionLaporanBulanan.classList.add('d-none');
            sectionLaporanHarian.classList.remove('d-none');
            contentHeader.textContent = 'Laporan Presensi Harian';

            menuLaporanHarian.classList.add('active');
            menuKaryawan.classList.remove('active');
            menuAbsensi.classList.remove('active');
            menuHariLibur.classList.remove('active');
            menuLaporanBulanan.classList.remove('active');
        });

        // event listener menu laporan absensi harian
        menuLaporanBulanan.addEventListener('click', function(e) {
            e.preventDefault();
        
            sectionKaryawan.classList.add('d-none');
            sectionAbsensi.classList.add('d-none');
            sectionHariLibur.classList.add('d-none');
            sectionLaporanHarian.classList.add('d-none');
            sectionLaporanBulanan.classList.remove('d-none');
            contentHeader.textContent = 'Laporan Presensi Harian';

            menuLaporanBulanan.classList.add('active');
            menuKaryawan.classList.remove('active');
            menuAbsensi.classList.remove('active');
            menuHariLibur.classList.remove('active');
            menuLaporanHarian.classList.remove('active');
        });
    </script>

    <!-- spinner -->
    <script>
        function showSpinner() {
            document.getElementById('loadingSpinner').classList.remove('d-none');
        }
        function hideSpinner() {
            document.getElementById('loadingSpinner').classList.add('d-none');
        }
    </script>

    <!-- mencegah dropdown menu laporan tertutup saat dipilih -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Cegah dropdown item menutup saat diklik
            const laporanItems = document.querySelectorAll('#menu-laporan + .dropdown-menu .dropdown-item');
            laporanItems.forEach(function (item) {
                item.addEventListener('click', function (e) {
                    e.preventDefault();       // cegah navigasi
                    e.stopPropagation();      // cegah dropdown dari menutup
                    // Jalankan aksi lainnya, misal tampilkan modal:
                    // $('#modalLaporanHarian').modal('show');
                });
            });
        });
    </script>
</body>
</html>
